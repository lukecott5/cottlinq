<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account - LINQ</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            background-color: #f9fbfd;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
            font-weight: 400;
        }

        body.dark-mode {
            background-color: #1e2527;
            color: #d0d7de;
        }

        header {
            background: linear-gradient(135deg, #ffffff, #f0f4f8);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode header {
            background: linear-gradient(135deg, #2a2f32, #1e2527);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .logo {
            font-size: 1.5rem;
            color: #2a2f32;
        }

        .dark-mode .logo {
            color: #d0d7de;
        }

        nav a {
            margin-left: 1.5rem;
            text-decoration: none;
            color: #1a73e8;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #1557b0;
        }

        .dark-mode nav a {
            color: #8ab4f8;
        }

        .dark-mode nav a:hover {
            color: #c6d7f8;
        }

        main {
            flex: 1;
            padding: 3rem 2rem;
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #2a2f32;
            font-size: 2.25rem;
            margin-bottom: 3rem;
            font-weight: 400;
        }

        .dark-mode h1 {
            color: #d0d7de;
        }

        .account-section {
            background: #ffffff;
            border-radius: 16px;
            padding: 2.5rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .dark-mode .account-section {
            background: #2a2f32;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .account-section h2 {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #2a2f32;
            font-weight: 400;
        }

        .dark-mode .account-section h2 {
            color: #d0d7de;
        }

        .profile-pic-container {
            position: relative;
            text-align: center;
            margin-bottom: 1rem; /* Reduced to accommodate name */
        }

        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #000000; /* Black border for clarity */
            transition: opacity 0.3s;
        }

        .upload-overlay {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            color: #ffffff;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .profile-pic-container:hover .upload-overlay {
            opacity: 1;
        }

        .upload-overlay span {
            text-align: center;
        }

        .current-name {
            margin-top: 0.5rem;
            font-size: 1.25rem;
            color: #2a2f32;
            font-weight: 400;
        }

        .dark-mode .current-name {
            color: #d0d7de;
        }

        .form-group {
            margin-bottom: 2rem;
        }

        label {
            display: block;
            margin-bottom: 0.75rem;
            color: #4a5568;
            font-weight: 400;
        }

        .dark-mode label {
            color: #a0aec0;
        }

        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d9e6;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Lexend', sans-serif;
            box-sizing: border-box;
            transition: border-color 0.3s, background-color 0.3s, box-shadow 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #1a73e8;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .dark-mode input,
        .dark-mode textarea,
        .dark-mode select {
            background-color: #3a4144;
            border-color: #4a5568;
            color: #d0d7de;
        }

        textarea {
            height: 120px;
            resize: none;
        }

        button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #1a73e8, #1557b0);
            color: #ffffff;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Lexend', sans-serif;
            cursor: pointer;
            transition: transform 0.1s, background 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .danger-btn {
            background: linear-gradient(135deg, #dc3545, #b02a37);
        }

        .secondary-btn {
            background: linear-gradient(135deg, #6b7280, #4a5568);
        }

        .toggle {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .toggle input {
            width: auto;
            margin-right: 0.75rem;
        }

        footer {
            background: linear-gradient(135deg, #ffffff, #f0f4f8);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #4a5568;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode footer {
            background: linear-gradient(135deg, #2a2f32, #1e2527);
            color: #a0aec0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
        }

        footer a {
            color: #1a73e8;
            text-decoration: none;
            margin-left: 1.5rem;
            font-weight: 400;
            transition: color 0.3s;
        }

        footer a:hover {
            color: #1557b0;
        }

        .dark-mode footer a {
            color: #8ab4f8;
        }

        .dark-mode footer a:hover {
            color: #c6d7f8;
        }

        @media (max-width: 768px) {
            main {
                padding: 1.5rem;
            }

            .account-section {
                padding: 1.5rem;
            }

            .profile-pic {
                width: 100px;
                height: 100px;
            }

            .upload-overlay {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">LINQ</div>
        <nav>
            <a href="#">News</a>
            <a href="#">Favorites</a>
            <a href="#">Community</a>
        </nav>
    </header>

    <main>
        <h1>Account Settings</h1>

        <!-- Profile Information -->
        <div class="account-section">
            <h2>Profile Information</h2>
            <div class="profile-pic-container">
                <img id="profile-pic" src="https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg?20200418092106" alt="Profile Picture">
                <div class="upload-overlay" onclick="document.getElementById('profile-pic-upload').click()">
                    <span>Click or Drag<br>to Upload</span>
                </div>
                <input type="file" id="profile-pic-upload" accept="image/*" onchange="updateProfilePic()" style="display: none;">
            </div>
            <div class="current-name" id="current-name"></div>
            <div class="form-group">
                <label for="display-email">Email</label>
                <input type="email" id="display-email" readonly>
            </div>
            <div class="form-group">
                <label for="edit-name">Name</label>
                <input type="text" id="edit-name" placeholder="Update Name">
            </div>
            <div class="form-group">
                <label for="edit-bio">Profile Bio</label>
                <textarea id="edit-bio" placeholder="Update Profile Bio"></textarea>
            </div>
            <button onclick="updateProfile()">Update Profile</button>
        </div>

        <!-- Security Settings -->
        <div class="account-section">
            <h2>Security Settings</h2>
            <div class="form-group">
                <label for="edit-password">Update Password</label>
                <input type="password" id="edit-password" placeholder="New Password">
            </div>
            <div class="toggle">
                <input type="checkbox" id="two-factor" onchange="toggleTwoFactor()">
                <label for="two-factor">Enable Two-Factor Authentication</label>
            </div>
            <div class="form-group" id="two-factor-phone" style="display: none;">
                <label for="phone-number">Phone Number for 2FA</label>
                <input type="tel" id="phone-number" placeholder="+1234567890">
            </div>
            <div class="form-group">
                <label for="security-question">Security Question</label>
                <select id="security-question">
                    <option value="">Select a question</option>
                    <option value="pet">What is the name of your first pet?</option>
                    <option value="school">What was the name of your elementary school?</option>
                    <option value="city">In what city were you born?</option>
                </select>
            </div>
            <div class="form-group">
                <label for="security-answer">Answer</label>
                <input type="text" id="security-answer" placeholder="Your answer">
            </div>
            <button onclick="updateSecurity()">Save Security Settings</button>
        </div>

        <!-- Notification Preferences -->
        <div class="account-section">
            <h2>Notification Preferences</h2>
            <div class="toggle">
                <input type="checkbox" id="email-notifications" onchange="updateNotifications()">
                <label for="email-notifications">Receive Email Notifications</label>
            </div>
        </div>

        <!-- Appearance -->
        <div class="account-section">
            <h2>Appearance</h2>
            <div class="toggle">
                <input type="checkbox" id="dark-mode" onchange="toggleDarkMode()">
                <label for="dark-mode">Enable Dark Mode</label>
            </div>
        </div>

        <!-- Account Actions -->
        <div class="account-section">
            <h2>Account Actions</h2>
            <button class="secondary-btn" onclick="logout()">Log Out</button>
            <button class="danger-btn" onclick="deleteAccount()">Delete Account</button>
        </div>
    </main>

    <footer>
        <div>© 2025 LINQ. All rights reserved.</div>
        <div>
            <a href="#">Terms of Service</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Contact Us</a>
        </div>
    </footer>

    <script>
        // Retrieve current user from localStorage
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let users = JSON.parse(localStorage.getItem('users')) || [];

        // Default profile picture (external URL)
        const defaultProfilePic = "https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg?20200418092106";

        // Check if a user is logged in
        if (!currentUser || !currentUser.email) {
            alert('No user logged in. Redirecting to login page...');
            window.location.href = 'index.html'; // Replace with your login page's file name
            return;
        } else {
            displayUserInfo();
            loadPreferences();
        }

        // Display user info
        function displayUserInfo() {
            document.getElementById('display-email').value = currentUser.email || 'Not available';
            document.getElementById('edit-name').value = currentUser.name || '';
            document.getElementById('edit-bio').value = currentUser.bio || '';
            document.getElementById('profile-pic').src = currentUser.profilePic || defaultProfilePic;
            document.getElementById('current-name').textContent = currentUser.name || 'User'; // Display current name
            document.getElementById('two-factor').checked = currentUser.twoFactorEnabled || false;
            document.getElementById('two-factor-phone').style.display = currentUser.twoFactorEnabled ? 'block' : 'none';
            document.getElementById('phone-number').value = currentUser.phoneNumber || '';
            document.getElementById('security-question').value = currentUser.securityQuestion || '';
            document.getElementById('security-answer').value = currentUser.securityAnswer || '';
        }

        // Update profile
        function updateProfile() {
            const newName = document.getElementById('edit-name').value;
            const newBio = document.getElementById('edit-bio').value;

            if (newName) currentUser.name = newName;
            if (newBio) currentUser.bio = newBio;

            updateUserInStorage();
            displayUserInfo();
            alert('Profile updated successfully!');
        }

        // Update profile picture
        function updateProfilePic() {
            const fileInput = document.getElementById('profile-pic-upload');
            const img = document.getElementById('profile-pic');
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                    currentUser.profilePic = e.target.result;
                    updateUserInStorage();
                };
                reader.readAsDataURL(fileInput.files[0]);
            }
        }

        // Toggle 2FA
        function toggleTwoFactor() {
            const isEnabled = document.getElementById('two-factor').checked;
            document.getElementById('two-factor-phone').style.display = isEnabled ? 'block' : 'none';
            currentUser.twoFactorEnabled = isEnabled;
            if (isEnabled) {
                const phone = document.getElementById('phone-number').value;
                if (!phone) {
                    alert('Please enter a phone number for 2FA.');
                    document.getElementById('two-factor').checked = false;
                    document.getElementById('two-factor-phone').style.display = 'none';
                    currentUser.twoFactorEnabled = false;
                    return;
                }
                currentUser.phoneNumber = phone;
            } else {
                delete currentUser.phoneNumber;
            }
            updateUserInStorage();
        }

        // Update security settings
        function updateSecurity() {
            const newPassword = document.getElementById('edit-password').value;
            const securityQuestion = document.getElementById('security-question').value;
            const securityAnswer = document.getElementById('security-answer').value;

            if (newPassword && newPassword.length < 6) {
                alert('New password must be at least 6 characters long.');
                return;
            }
            if (newPassword) currentUser.password = newPassword;
            if (securityQuestion && securityAnswer) {
                currentUser.securityQuestion = securityQuestion;
                currentUser.securityAnswer = securityAnswer;
            } else if (securityQuestion || securityAnswer) {
                alert('Please provide both a security question and answer.');
                return;
            }

            updateUserInStorage();
            alert('Security settings updated successfully!');
        }

        // Update notification preferences
        function updateNotifications() {
            currentUser.emailNotifications = document.getElementById('email-notifications').checked;
            updateUserInStorage();
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDarkMode = document.getElementById('dark-mode').checked;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Load user preferences
        function loadPreferences() {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            document.getElementById('dark-mode').checked = isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);

            document.getElementById('email-notifications').checked = currentUser.emailNotifications !== false;
        }

        // Update user in localStorage
        function updateUserInStorage() {
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
            } else {
                users.push(currentUser);
            }
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        }

        // Log out
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html'; // Replace with your login page's file name
        }

        // Delete account
        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This cannot be undone.')) {
                users = users.filter(u => u.email !== currentUser.email);
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.removeItem('currentUser');
                alert('Account deleted successfully.');
                window.location.href = 'index.html'; // Replace with your login page's file name
            }
        }
    </script>
</body>
</html>
