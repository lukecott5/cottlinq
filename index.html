<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy News</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Marquee animation for the banner */
        .marquee {
            overflow: hidden;
            white-space: nowrap;
            width: 100%;
            display: inline-block;
        }
        .marquee-content {
            display: inline-block;
            animation: marquee 25s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        .marquee-content:hover {
            animation-play-state: paused;
        }
        /* Hero image styling */
        .hero-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            filter: brightness(0.6);
            display: block;
        }
        /* Gradient overlay for hero section */
        .hero-section {
            position: relative;
        }
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.7));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 2rem;
        }
        /* News article images */
        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }
        .news-image:hover {
            transform: scale(1.05);
        }
        /* Professional typography */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 50;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.2s ease;
        }
        .close-btn:hover {
            color: #000;
        }
        /* Smooth transitions for articles */
        article {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        article:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        /* Input field styles */
        input, select, textarea {
            transition: border-color 0.3s ease;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #2563eb;
            outline: none;
        }
        /* Button hover effects */
        button {
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        button:hover {
            transform: translateY(-2px);
        }
        /* Navigation bar styles */
        .nav-link {
            transition: color 0.2s ease;
        }
        .nav-link:hover {
            color: #2563eb;
        }
        /* Favorites icon animation */
        .favorite-btn {
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .favorite-btn:hover {
            color: #dc2626;
            transform: scale(1.2);
        }
        .favorited {
            color: #dc2626;
        }
        /* Terms and Privacy sections */
        .terms-privacy-content {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 60;
        }
        /* Sidebar styles */
        .sidebar {
            position: sticky;
            top: 2rem;
            height: fit-content;
            background: linear-gradient(145deg, #f3f4f6, #e5e7eb);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        /* Category tag styles */
        .category-tag {
            display: inline-block;
            background: #e5e7eb;
            color: #374151;
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            margin-left: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md py-4">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900">Energy News</a>
            <div class="space-x-6">
                <a href="#news" class="nav-link text-gray-700 hover:text-blue-600">News</a>
                <a href="#favorites" id="favoritesTab" class="nav-link text-gray-700 hover:text-blue-600 hidden">Favorites</a>
                <button id="submitArticleBtn" class="nav-link text-gray-700 hover:text-blue-600 hidden">Submit Article</button>
                <button id="authBtn" class="text-gray-700 hover:text-blue-600" onclick="showModal()">Login / Sign Up</button>
                <button id="logoutBtn" class="text-gray-700 hover:text-blue-600 hidden" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Custom Background -->
    <section class="hero-section">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpu4eloCeNICpXaEffHo2EfPEeY2J8bI8Usw&s" alt="Stock Market Background" class="hero-image" loading="lazy">
        <div class="hero-overlay">
            <div id="userGreeting" class="hidden mb-4 text-xl font-semibold text-white"></div>
            <h1 class="text-5xl font-bold text-white tracking-tight">Energy News</h1>
        </div>
    </section>

    <!-- Moving Banner with Market Prices -->
    <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-3 overflow-hidden shadow-md">
        <div class="marquee">
            <div class="marquee-content flex space-x-10">
                <span>DOW: 40,589.34 (+1.64%) ▲</span>
                <span>S&P 500: 5,459.10 (+1.11%) ▲</span>
                <span>NASDAQ: 17,357.88 (+1.03%) ▲</span>
                <span>TSLA: $219.80 (+0.20%) ▲</span>
                <span>AAPL: $217.96 (+0.22%) ▲</span>
                <span>NVDA: $113.06 (+0.69%) ▲</span>
                <span>AMD: $139.99 (+1.21%) ▲</span>
                <span>Gold: $3,512.40 (+0.85%) ▲</span>
                <span>Oil: $77.16 (-1.96%) ▼</span>
            </div>
        </div>
    </div>

    <!-- Login/Sign-Up Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">×</span>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Join Energy News</h2>
            <p class="text-gray-600 mb-6">Sign up or log in to access exclusive content and personalized updates.</p>
            <div class="space-y-4">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">Name (Sign Up Only)</label>
                    <input type="text" id="name" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" placeholder="Your Name">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" placeholder="your@email.com">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" placeholder="••••••••">
                </div>
                <div class="flex space-x-4">
                    <button onclick="handleLogin()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Log In</button>
                    <button onclick="handleSignup()" class="w-full bg-gray-800 text-white py-2 rounded-lg hover:bg-gray-900">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Article Submission Modal -->
    <div id="submitArticleModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeSubmitModal()">×</span>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Submit Your Article</h2>
            <form id="articleForm" class="space-y-4">
                <div>
                    <label for="articleTitle" class="block text-sm font-medium text-gray-700">Title</label>
                    <input type="text" id="articleTitle" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" placeholder="Article Title" required>
                </div>
                <div>
                    <label for="articleContent" class="block text-sm font-medium text-gray-700">Content</label>
                    <textarea id="articleContent" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" rows="4" placeholder="Article Content" required></textarea>
                </div>
                <div>
                    <label for="articleCategory" class="block text-sm font-medium text-gray-700">Category</label>
                    <select id="articleCategory" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600" required>
                        <option value="Crude Oil">Crude Oil</option>
                        <option value="Natural Gas">Natural Gas</option>
                        <option value="Petrochemicals">Petrochemicals</option>
                        <option value="Power">Power</option>
                        <option value="Renewables">Renewables</option>
                        <option value="Company News">Company News</option>
                        <option value="Earnings">Earnings</option>
                        <option value="Trending">Trending</option>
                    </select>
                </div>
                <div>
                    <label for="articleImage" class="block text-sm font-medium text-gray-700">Image (Optional)</label>
                    <input type="file" id="articleImage" class="mt-1 w-full px-4 py-2 border border-gray-300 rounded-lg" accept="image/*">
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Submit Article</button>
            </form>
        </div>
    </div>

    <!-- Terms and Privacy Sections -->
    <div id="termsContent" class="terms-privacy-content">
        <span class="close-btn" onclick="closeTerms()">×</span>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Terms of Service</h2>
        <p class="text-gray-700">Welcome to Energy News. By accessing or using our website, you agree to comply with and be bound by the following terms and conditions. These terms govern your use of the site and any services provided.</p>
        <p class="text-gray-700 mt-4">1. <strong>Acceptance of Terms</strong>: By using this site, you accept these terms in full. If you disagree, please do not use the site.</p>
        <p class="text-gray-700 mt-2">2. <strong>User Conduct</strong>: You agree not to use the site for illegal or unauthorized purposes.</p>
        <p class="text-gray-700 mt-2">3. <strong>Content Ownership</strong>: All content on this site is owned by Energy News or its licensors unless otherwise stated.</p>
        <p class="text-gray-700 mt-2">4. <strong>Limitation of Liability</strong>: We are not liable for any indirect or consequential damages arising from your use of the site.</p>
        <p class="text-gray-700 mt-2">For the most current version, please contact us at support@stockmarketnews.com.</p>
    </div>
    <div id="privacyContent" class="terms-privacy-content">
        <span class="close-btn" onclick="closePrivacy()">×</span>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Privacy Policy</h2>
        <p class="text-gray-700">At Energy News, we are committed to protecting your privacy. This policy outlines how we collect, use, and safeguard your information.</p>
        <p class="text-gray-700 mt-4">1. <strong>Information Collection</strong>: We collect personal information such as your name and email when you sign up or submit articles.</p>
        <p class="text-gray-700 mt-2">2. <strong>Use of Information</strong>: Your data is used to personalize your experience and improve our services.</p>
        <p class="text-gray-700 mt-2">3. <strong>Data Security</strong>: We implement reasonable measures to protect your information from unauthorized access.</p>
        <p class="text-gray-700 mt-2">4. <strong>Third-Party Sharing</strong>: We do not sell or share your personal data with third parties except as required by law.</p>
        <p class="text-gray-700 mt-2">For questions, contact us at privacy@stockmarketnews.com.</p>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-10 sm:px-6 lg:px-8">
        <div class="flex flex-col lg:flex-row lg:space-x-8">
            <!-- News Section -->
            <section id="news" class="flex-1">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Latest News</h2>
                <div id="newsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <!-- Right Sidebar Filter Panel -->
            <aside class="sidebar lg:w-72 mt-10 lg:mt-0">
                <h3 class="text-xl font-semibold text-gray-900 mb-4">Filter by Category</h3>
                <div class="space-y-3">
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Crude Oil">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Crude Oil</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Natural Gas">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Natural Gas</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Petrochemicals">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Petrochemicals</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Power">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Power</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Renewables">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Renewables</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Company News">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Company News</span>
                    </label>
                    <label class="flex items-center p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <input type="checkbox" class="category-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500" value="Earnings">
                        <span class="ml-3 text-gray-800 font-bold text-lg">Earnings</span>
                    </label>
                </div>
            </aside>
        </div>

        <!-- Favorites Section -->
        <section id="favorites" class="hidden py-10">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Your Favorited Articles</h2>
            <div id="favoritesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
            <p>© 2025 Energy News. All rights reserved.</p>
            <div class="mt-4 md:mt-0 space-x-4">
                <a href="#" class="hover:text-white transition-colors" onclick="showTerms(event)">Terms of Service</a>
                <a href="#" class="hover:text-white transition-colors" onclick="showPrivacy(event)">Privacy Policy</a>
                <a href="#" class="hover:text-white transition-colors">Contact Us</a>
            </div>
        </div>
    </footer>

    <script>
        // Mock data for market prices
        const marketData = [
            { symbol: 'DOW', price: '40,589.34', change: '+1.64%' },
            { symbol: 'S&P 500', price: '5,459.10', change: '+1.11%' },
            { symbol: 'NASDAQ', price: '17,357.88', change: '+1.03%' },
            { symbol: 'TSLA', price: '$219.80', change: '+0.20%' },
            { symbol: 'AAPL', price: '$217.96', change: '+0.22%' },
            { symbol: 'NVDA', price: '$113.06', change: '+0.69%' },
            { symbol: 'AMD', price: '$139.99', change: '+1.21%' },
            { symbol: 'Gold', price: '$3,512.40', change: '+0.85%' },
            { symbol: 'Oil', price: '$77.16', change: '-1.96%' }
        ];

        // Function to update marquee content
        function updateMarquee() {
            const marqueeContent = document.querySelector('.marquee-content');
            marqueeContent.innerHTML = marketData.map(data => 
                `<span>${data.symbol}: ${data.price} (${data.change}) ${data.change.includes('+') ? '▲' : '▼'}</span>`
            ).join('<span class="mx-10"></span>');
        }

        // Initial marquee update
        updateMarquee();

        // Mock articles data (simulating fetched data, 3 per category)
        const articlesData = [
            { id: 1, category: 'Crude Oil', title: 'Oil Prices Surge Amid Supply Concerns', date: 'May 3, 2025', source: 'Reuters', link: 'https://example.com/article-1', image: 'https://via.placeholder.com/400x200?text=Crude+Oil' },
            { id: 2, category: 'Crude Oil', title: 'OPEC+ Extends Production Cuts', date: 'May 3, 2025', source: 'Bloomberg', link: 'https://example.com/article-2', image: 'https://via.placeholder.com/400x200?text=Crude+Oil' },
            { id: 3, category: 'Crude Oil', title: 'Global Demand for Crude Hits Record', date: 'May 3, 2025', source: 'CNBC', link: 'https://example.com/article-3', image: 'https://via.placeholder.com/400x200?text=Crude+Oil' },
            { id: 4, category: 'Natural Gas', title: 'Natural Gas Prices Soar in Europe', date: 'May 3, 2025', source: 'Seeking Alpha', link: 'https://example.com/article-4', image: 'https://via.placeholder.com/400x200?text=Natural+Gas' },
            { id: 5, category: 'Natural Gas', title: 'US Natural Gas Exports Rise', date: 'May 3, 2025', source: 'Yahoo Finance', link: 'https://example.com/article-5', image: 'https://via.placeholder.com/400x200?text=Natural+Gas' },
            { id: 6, category: 'Natural Gas', title: 'Natural Gas Futures Hit 5-Year High', date: 'May 3, 2025', source: 'CNBC', link: 'https://example.com/article-6', image: 'https://via.placeholder.com/400x200?text=Natural+Gas' },
            { id: 7, category: 'Petrochemicals', title: 'Petrochemical Industry Faces Challenges', date: 'May 3, 2025', source: 'Forbes', link: 'https://example.com/article-7', image: 'https://via.placeholder.com/400x200?text=Petrochemicals' },
            { id: 8, category: 'Petrochemicals', title: 'New Petrochemical Plant Opens in Asia', date: 'May 3, 2025', source: 'Wall Street Journal', link: 'https://example.com/article-8', image: 'https://via.placeholder.com/400x200?text=Petrochemicals' },
            { id: 9, category: 'Petrochemicals', title: 'Petrochemical Demand Grows in 2025', date: 'May 3, 2025', source: 'Financial Times', link: 'https://example.com/article-9', image: 'https://via.placeholder.com/400x200?text=Petrochemicals' },
            { id: 10, category: 'Power', title: 'Power Grid Faces Strain in Summer', date: 'May 3, 2025', source: 'BBC', link: 'https://example.com/article-10', image: 'https://via.placeholder.com/400x200?text=Power' },
            { id: 11, category: 'Power', title: 'Nuclear Power Makes a Comeback', date: 'May 3, 2025', source: 'Reuters', link: 'https://example.com/article-11', image: 'https://via.placeholder.com/400x200?text=Power' },
            { id: 12, category: 'Power', title: 'Power Outages Hit Major Cities', date: 'May 3, 2025', source: 'Bloomberg', link: 'https://example.com/article-12', image: 'https://via.placeholder.com/400x200?text=Power' },
            { id: 13, category: 'Renewables', title: 'Solar Energy Booms in 2025', date: 'May 3, 2025', source: 'CNBC', link: 'https://example.com/article-13', image: 'https://via.placeholder.com/400x200?text=Renewables' },
            { id: 14, category: 'Renewables', title: 'Wind Power Projects Expand Globally', date: 'May 3, 2025', source: 'Seeking Alpha', link: 'https://example.com/article-14', image: 'https://via.placeholder.com/400x200?text=Renewables' },
            { id: 15, category: 'Renewables', title: 'Renewable Energy Subsidies Increase', date: 'May 3, 2025', source: 'Yahoo Finance', link: 'https://example.com/article-15', image: 'https://via.placeholder.com/400x200?text=Renewables' },
            { id: 16, category: 'Company News', title: 'Tesla Announces New Factory', date: 'May 3, 2025', source: 'CNBC', link: 'https://example.com/article-16', image: 'https://via.placeholder.com/400x200?text=Company+News' },
            { id: 17, category: 'Company News', title: 'Apple Unveils New Product Line', date: 'May 3, 2025', source: 'Forbes', link: 'https://example.com/article-17', image: 'https://via.placeholder.com/400x200?text=Company+News' },
            { id: 18, category: 'Company News', title: 'Amazon Expands Logistics Network', date: 'May 3, 2025', source: 'Wall Street Journal', link: 'https://example.com/article-18', image: 'https://via.placeholder.com/400x200?text=Company+News' },
            { id: 19, category: 'Earnings', title: 'Google Reports Record Earnings', date: 'May 3, 2025', source: 'Financial Times', link: 'https://example.com/article-19', image: 'https://via.placeholder.com/400x200?text=Earnings' },
            { id: 20, category: 'Earnings', title: 'Microsoft Beats Earnings Expectations', date: 'May 3, 2025', source: 'BBC', link: 'https://example.com/article-20', image: 'https://via.placeholder.com/400x200?text=Earnings' },
            { id: 21, category: 'Earnings', title: 'ExxonMobil Posts Strong Q1 Results', date: 'May 3, 2025', source: 'Reuters', link: 'https://example.com/article-21', image: 'https://via.placeholder.com/400x200?text=Earnings' }
        ];

        // Modal functionality
        const authModal = document.getElementById('authModal');
        const submitArticleModal = document.getElementById('submitArticleModal');
        const termsContent = document.getElementById('termsContent');
        const privacyContent = document.getElementById('privacyContent');

        function showModal() {
            authModal.style.display = 'flex';
        }

        function closeModal() {
            authModal.style.display = 'none';
        }

        function showSubmitModal() {
            submitArticleModal.style.display = 'flex';
        }

        function closeSubmitModal() {
            submitArticleModal.style.display = 'none';
        }

        function showTerms(event) {
            event.preventDefault();
            termsContent.style.display = 'block';
        }

        function closeTerms() {
            termsContent.style.display = 'none';
        }

        function showPrivacy(event) {
            event.preventDefault();
            privacyContent.style.display = 'block';
        }

        function closePrivacy() {
            privacyContent.style.display = 'none';
        }

        // Prevent modal for logged-in users
        let currentUser = JSON.parse(localStorage.getItem('user')) || null;
        const favoritesTab = document.getElementById('favoritesTab');
        const submitArticleBtn = document.getElementById('submitArticleBtn');
        const authBtn = document.getElementById('authBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userGreeting = document.getElementById('userGreeting');

        function updateUIForUser() {
            if (currentUser) {
                favoritesTab.classList.remove('hidden');
                submitArticleBtn.classList.remove('hidden');
                authBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                userGreeting.classList.remove('hidden');
                userGreeting.textContent = `Hello, ${currentUser.name}`;
            } else {
                favoritesTab.classList.add('hidden');
                submitArticleBtn.classList.add('hidden');
                authBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                userGreeting.classList.add('hidden');
            }
        }

        // Show modal only if not logged in
        setTimeout(() => {
            if (!currentUser) {
                showModal();
                setInterval(() => {
                    if (!currentUser) {
                        showModal();
                    }
                }, 5 * 60 * 1000); // Every 5 minutes
            }
        }, 15 * 1000); // Initial delay of 15 seconds

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target === authModal) {
                closeModal();
            }
            if (event.target === submitArticleModal) {
                closeSubmitModal();
            }
            if (event.target === termsContent) {
                closeTerms();
            }
            if (event.target === privacyContent) {
                closePrivacy();
            }
        };

        // Authentication handling
        function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            if (email && password) {
                currentUser = { name: email.split('@')[0], email, favorites: [] };
                localStorage.setItem('user', JSON.stringify(currentUser));
                updateUIForUser();
                closeModal();
            } else {
                alert('Please enter email and password.');
            }
        }

        function handleSignup() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            if (name && email && password) {
                currentUser = { name, email, favorites: [] };
                localStorage.setItem('user', JSON.stringify(currentUser));
                updateUIForUser();
                closeModal();
            } else {
                alert('Please fill in all fields.');
            }
        }

        function handleLogout() {
            localStorage.removeItem('user');
            currentUser = null;
            updateUIForUser();
            showNewsSection();
        }

        // Initial UI update
        updateUIForUser();

        // Display articles
        const newsGrid = document.getElementById('newsGrid');
        let displayedArticles = [...articlesData];

        function displayArticles(articles) {
            newsGrid.innerHTML = '';
            articles.forEach(article => {
                const articleElement = document.createElement('article');
                articleElement.className = 'bg-white rounded-lg shadow-lg overflow-hidden';
                articleElement.setAttribute('data-category', article.category);
                articleElement.innerHTML = `
                    <img src="${article.image}" alt="${article.category}" class="news-image" loading="lazy">
                    <div class="p-5">
                        <h2 class="text-lg font-semibold text-gray-900">${article.title}</h2>
                        <p class="text-gray-500 text-sm mt-2">${article.date} • ${article.source} <span class="category-tag">${article.category}</span></p>
                        <div class="flex justify-between items-center mt-3">
                            <a href="${article.link}" target="_blank" class="text-blue-700 hover:underline">Read More</a>
                            <button class="favorite-btn" onclick="toggleFavorite(${article.id})">❤️</button>
                        </div>
                    </div>
                `;
                newsGrid.appendChild(articleElement);
            });

            // Update favorited state
            if (currentUser && currentUser.favorites) {
                currentUser.favorites.forEach(id => {
                    const button = document.querySelector(`button[onclick="toggleFavorite(${id})"]`);
                    if (button) button.classList.add('favorited');
                });
            }
        }

        // Initial display of articles
        displayArticles(displayedArticles);

        // Category filtering with checkboxes
        const checkboxes = document.querySelectorAll('.category-checkbox');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const selectedCategories = Array.from(checkboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.value);

                if (selectedCategories.length === 0) {
                    displayedArticles = [...articlesData];
                } else {
                    displayedArticles = articlesData.filter(article => 
                        selectedCategories.includes(article.category)
                    );
                }

                displayArticles(displayedArticles);
            });
        });

        // Favorites handling
        let favorites = currentUser ? currentUser.favorites : [];
        const newsSection = document.getElementById('news');
        const favoritesSection = document.getElementById('favorites');
        const favoritesGrid = document.getElementById('favoritesGrid');

        function toggleFavorite(articleId) {
            if (!currentUser) {
                alert('Please log in to favorite articles.');
                showModal();
                return;
            }
            const index = favorites.indexOf(articleId);
            const button = document.querySelector(`button[onclick="toggleFavorite(${articleId})"]`);
            if (index === -1) {
                favorites.push(articleId);
                button.classList.add('favorited');
            } else {
                favorites.splice(index, 1);
                button.classList.remove('favorited');
            }
            currentUser.favorites = favorites;
            localStorage.setItem('user', JSON.stringify(currentUser));
            updateFavoritesSection();
        }

        function updateFavoritesSection() {
            favoritesGrid.innerHTML = '';
            const allArticles = articlesData.filter(article => favorites.includes(article.id));
            allArticles.forEach(article => {
                const articleElement = document.createElement('article');
                articleElement.className = 'bg-white rounded-lg shadow-lg overflow-hidden';
                articleElement.setAttribute('data-category', article.category);
                articleElement.innerHTML = `
                    <img src="${article.image}" alt="${article.category}" class="news-image" loading="lazy">
                    <div class="p-5">
                        <h2 class="text-lg font-semibold text-gray-900">${article.title}</h2>
                        <p class="text-gray-500 text-sm mt-2">${article.date} • ${article.source} <span class="category-tag">${article.category}</span></p>
                        <div class="flex justify-between items-center mt-3">
                            <a href="${article.link}" target="_blank" class="text-blue-700 hover:underline">Read More</a>
                            <button class="favorite-btn favorited" onclick="toggleFavorite(${article.id})">❤️</button>
                        </div>
                    </div>
                `;
                favoritesGrid.appendChild(articleElement);
            });
        }

        // Show favorites section when tab is clicked
        favoritesTab.addEventListener('click', () => {
            newsSection.classList.add('hidden');
            favoritesSection.classList.remove('hidden');
            updateFavoritesSection();
        });

        // Show news section when news tab is clicked
        document.querySelector('a[href="#news"]').addEventListener('click', () => {
            showNewsSection();
        });

        function showNewsSection() {
            newsSection.classList.remove('hidden');
            favoritesSection.classList.add('hidden');
        }

        // Article submission
        submitArticleBtn.addEventListener('click', showSubmitModal);

        const articleForm = document.getElementById('articleForm');
        articleForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const title = document.getElementById('articleTitle').value;
            const content = document.getElementById('articleContent').value;
            const category = document.getElementById('articleCategory').value;
            const imageFile = document.getElementById('articleImage').files[0];
            const imageUrl = imageFile ? URL.createObjectURL(imageFile) : 'https://via.placeholder.com/400x200?text=User+Article';

            const newArticleId = articlesData.length + 1;
            const newArticle = {
                id: newArticleId,
                category: category,
                title: title,
                date: new Date().toLocaleDateString(),
                source: currentUser.name,
                link: `https://example.com/article-${newArticleId}`,
                image: imageUrl
            };
            articlesData.unshift(newArticle);
            displayArticles(articlesData);
            closeSubmitModal();
            articleForm.reset();
        });

        // Image loading fallback
        document.querySelectorAll('img').forEach(img => {
            img.onerror = function() {
                this.src = 'https://via.placeholder.com/400x200?text=Image+Not+Found';
                this.alt = 'Image Not Found';
            };
        });
    </script>
</body>
</html>
